


## Step wise covered

db migrations
```shell
// -> To drop the db
npm run db:drop

// -> To create the migration
npm run db:create src/migrations/CreateTags

// -> To migrate the created migration
npm run db:migrate
 ```

seed db migrations
```shell
// -> Drop the db
npm run db:drop

// -> Run migration
npm run db:migrate

// -> Run seed migration
npm run db:seed
 ```

## Module covered
### 1. Swagger setup
- configured
### 2. Tag module
- Tags
### 3. Authentication
- Creating migrations
- What is DTO?
- Creating user entity
- Create login request
- Updating a user





## TODO
- Configure docker to run app
- Add seeds for tags to add some default tags
- Swagger support for all endpoints
- Move migration config into database folder
- Nodemailer
- At the end: OAuth2


## API Request/Response Notes

- using pipes
```js
  @Post('create')
  @UsePipes(new ValidationPipe())
  async createUser(
    @Body('user') createUserDto: CreateUserDto,
  ): Promise<{ user: UserEntity }> {
    const user = await this.userService.createUser(createUserDto);
    return this.userService.buildUserResponse(user);
  }
```

Post request without proper body
```js
{
    "user": {
         
    }
}
```

Response
```js
{
    "message": [
        "username should not be empty",
        "password should not be empty",
        "email must be an email",
        "email should not be empty"
    ],
    "error": "Bad Request",
    "statusCode": 400
}
```


## NOTE
- In NestJS, both `AuthGuard` and `AuthMiddleware` handle authentication and authorization,
- `Follows` Entity vs `@ManyToMany` + `@JoinTable`
   - Option 1: Separate Follows Entity (Recommended) 
      - Tracking additional metadata (e.g., followedAt, status).
   - Option 2: `@ManyToMany` + `@JoinTable` (Simpler)
      - Basic follow/unfollow (no extra metadata).
- It is generally recommended to push `docker-compose.yml`, `Dockerfile`, and `.dockerignore` files to a Git repository.
- Load environment variables to make env config working
      ```js

      dotenv.config();
      const getTypeOrmConfig: PostgresConnectionOptions = {
        type: 'postgres',
        host: process.env.DB_HOST, // 'db' in Docker, 'localhost' in dev
        port: parseInt(process.env.DB_PORT || '5056'),
        username: process.env.DB_USERNAME,
        password: process.env.DB_PASSWORD,
        database: process.env.DB_NAME,
        entities: [__dirname + '/**/*.entity{.ts,.js}'],
        synchronize: false,
        migrations: [__dirname + '/migrations/**/*{.ts,.js}'],
      };
      export default getTypeOrmConfig;

      ```
- Environment switching
```bash
# Development
docker-compose --profile dev up

# Production
docker-compose --profile prod up
```